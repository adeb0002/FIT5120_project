<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Eco Simulation</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/emission_appli.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Open Sans', sans-serif;
            background-color: #f4f4f4;
        }
    
        .simulation-container {
            display: flex;
            flex-direction: column; /* Changed to column to stack vertically */
            align-items: center; /* Center-align the children */
            margin: 0 auto;
            max-width: 1200px;
            padding: 0px; /* Adjusted padding */
        }
    
        .header-section {
            text-align: center; /* Center the header content */
            width: 100%; /* Full width */
            padding: 100px 0 0; /* Padding top and bottom */
        }
    
        .form-charts-container {
            display: flex;
            width: 100%; /* Full width to match the header section */
            justify-content: space-between; /* Space between form and charts */
        }
    
        .form-section, .charts-section {
            flex: 1; /* Each takes up half of the container */
            padding: 20px;
        }
    
        .chart-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
    
        .chart {
            flex-basis: 100%; /* Charts take full width of their container */
            padding: 20px;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    
        @media (max-width: 800px) {
            .form-charts-container {
                flex-direction: column; /* Stack vertically on smaller screens */
            }
        }
    
        .slider {
            width: 100%;
            margin: 15px 0;
        }
    
        h4 {
            margin-top: 20px;
        }
    
        button {
            margin: 20px 10px;
            padding: 10px 20px;
            font-weight: bold;
        }
    
        footer {
            margin-top: 40px;
            padding: 20px;
            text-align: center;
            background-color: #f1f1f1;
        }
    
        .highlight {
            color: green;
            font-weight: bold;
        }

        .option-item {
            margin-bottom: 10px; /* Space between options */
        }

        .option-item label {
            margin-right: 10px; /* Space between label and radio button */
        }

        input[type="radio"] {
            visibility: visible;
            position: relative; /* Sometimes necessary based on layout */
            opacity: 1; /* In case they have been faded out */
        }

        .checkmark-label {
            margin-left: 5px; /* Small space after the checkbox for 'Yes' */
        }

        input[type="checkbox"] {
            visibility: visible; /* Ensures checkboxes are not hidden */
            opacity: 1; /* Ensures full opacity */
            margin-right: 5px; /* Spacing between checkbox and label */
        }
    </style>
    
</head>
<body>
    <!-- Header Section with Navigation Bar -->
    <div class="header">
        <div class="container">
            <nav class="navbar navbar-inverse" role="navigation">
                <div class="navbar-header">
                    <button type="button" id="nav-toggle" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span the class="icon-bar"></span>
                        <span the class="icon-bar"></span>
                    </button>
                    <a href="index.html" class="navbar-brand scroll-top">
                        <img src="img/logo.png" alt="EcoInsight Logo" style="height: 80px; margin-right: 10px;">
                    </a>
                </div>
                <div id="main-nav" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="index.html" class="scroll-top">Home</a></li>
                        <li><a href="index.html#contact-us" class="scroll-link" data-id="contact-us">Our Mission</a></li>
                        <li><a href="index.html#about" class="scroll-link" data-id="about">Services</a></li>
                        <li><a href="#" id="clear-session-link">Emission Calculator</a></li>
                        <li><a href="recommendations.html">Recommendations</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    
    <div class="simulation-container">
        <div class="header-section">
            <h1>Eco Simulation</h1>
            <p>Adjust your lifestyle choices to see real-time changes in carbon emissions and cost savings. Click Apply at the bottom of the screen to see the changes, or click reset to start again.</p>
        </div>

        <div class="form-charts-container">
            <div class="form-section">

                <h4>Appliance Use:</h4>

                <!-- Television Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/television.png" alt="Television Icon">
                    </span>
                    <span class="text">Television</span>
                </h3>
                <div class="form-group">
                    <label for="tv-screen-size">What screen size is your television?</label>
                    <select id="tv-screen-size" class="form-control" style="width: 500px;">
                        <option value="">--Select Size--</option>
                        <option value="Less than 40">Less than 40"</option>
                        <option value="40-49">40 - 49"</option>
                        <option value="50-59">50 - 59"</option>
                        <option value="60-69">60 - 69"</option>
                        <option value="70-79">70 - 79"</option>
                        <option value="80-89">80 - 89"</option>
                        <option value="90-99">90 - 99"</option>
                        <option value="Greater than 100">Greater than 100"</option>
                    </select>
                </div>
                <div class="form-group radio-question">
                    <label for="television-screen-tech">What screen technology does your television use?</label>
                    <div class="radio-option">
                        <input type="radio" id="tech-lcd" name="television-screen-tech" value="LCD" required>
                        <label for="tech-lcd" class="radio-label">LCD</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="tech-plasma" name="television-screen-tech" value="Plasma" required>
                        <label for="tech-plasma" class="radio-label">Plasma</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="tech-led" name="television-screen-tech" value="LED" required>
                        <label for="tech-led" class="radio-label">LED</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="tech-oled" name="television-screen-tech" value="OLED" required>
                        <label for="tech-oled" class="radio-label">OLED</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="television-hours">How many hours do you watch television a week?</label>
                    <input type="number" class="form-control" id="television-hours" name="television-hours" min="1" value="1" required>
                </div>

                <!-- Dishwasher Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/dishwasher.png" alt="Dishwasher Icon">
                    </span>
                    <span class="text">Dishwasher</span>
                </h3>
                <div class="form-group">
                    <label for="dishwasher-usage">How many times do you use the dishwasher a week?</label>
                    <input type="number" class="form-control" id="dishwasher-usage" name="dishwasher-usage" min="1" value="1" required>
                </div>

                <!-- Clothes Washer Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/clotheswasher.png" alt="Clotheswasher Icon">
                    </span>
                    <span class="text">Clothes Washer</span>
                </h3>
                <div class="form-group radio-question">
                    <label for="clothes-washer-loading">What type of loading is your clothes washer?</label>
                    <div class="radio-option">
                        <input type="radio" id="washer-loading-front" name="clothes-washer-loading" value="Front" required>
                        <label for="washer-loading-front" class="radio-label">Front</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="washer-loading-top" name="clothes-washer-loading" value="Top" required>
                        <label for="washer-loading-top" class="radio-label">Top</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clothes-washer-load-size">What load size is your clothes washer?</label>
                </div>
                <div class="slider-container">
                    <input type="range" class="slider" id="clothes-washer-load-size" name="clothes-washer-load-size" min="2" max="19" step="0.5" value="10.5" required>
                    <div id="slider-value-container">
                        <span id="load-size-value">10.5 kg</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clothes-washer-usage">How many times do you use the clothes washer a week?</label>
                    <input type="number" class="form-control" id="clothes-washer-usage" name="clothes-washer-usage" min="1" value="1" required>
                </div>

                <!-- Clothes Dryer Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/clothesdryer.png" alt="Clothesdryer Icon">
                    </span>
                    <span class="text">Clothes Dryer</span>
                </h3>
                <div class="form-group radio-question">
                    <label for="clothes-dryer-type">What type of clothes dryer do you use?</label>
                    <div class="radio-option">
                        <input type="radio" id="dryer-type-vented" name="clothes-dryer-type" value="Vented" required>
                        <label for="dryer-type-vented" class="radio-label">Vented</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="dryer-type-condenser" name="clothes-dryer-type" value="Condenser" required>
                        <label for="dryer-type-condenser" class="radio-label">Condenser</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clothes-dryer-usage">How many times do you use the clothes dryer a week?</label>
                    <input type="number" class="form-control" id="clothes-dryer-usage" name="clothes-dryer-usage" min="1" value="1" required>
                </div>

                <!-- Air Conditioner Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/air_conditioner.png">
                    </span>
                    <span class="text">Air Conditioner</span>
                </h3>
                <div class="form-group radio-question">
                    <label for="air-conditioner-type">Is your air conditioner ducted or non-ducted?</label>
                    <div class="radio-option">
                        <input type="radio" id="ac-type-ducted" name="air-conditioner-type" value="Ducted" required>
                        <label for="ac-type-ducted" class="radio-label">Ducted</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="ac-type-non-ducted" name="air-conditioner-type" value="Non Ducted" required>
                        <label for="ac-type-non-ducted" class="radio-label">Non Ducted</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="ac-type-both" name="air-conditioner-type" value="Both" required>
                        <label for="ac-type-both" class="radio-label">Both</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="air-conditioner-hours">How many hours do you use the air conditioner in a week?</label>
                    <input type="number" class="form-control" id="air-conditioner-hours" name="air-conditioner-hours" min="1" value="1" required>
                </div>

                <!-- Refrigerator Section -->
                <h3 class="icon-text">
                    <span class="icon">
                        <img src="img/refrigerator.png" alt="Refrigerator Icon">
                    </span>
                    <span class="text">Refrigerator</span>
                </h3>
                <div class="form-group">
                    <label for="refrigerator-volume">What volume is your refrigerator?</label>
                    <select class="form-control" id="refrigerator-volume" name="refrigerator-volume" style="width: 500px;" required>
                        <option value="">--Select Volume--</option>
                        <option value="<99L">Less than 99L</option>
                        <option value="100-199L">100 - 199L</option>
                        <option value="200-299L">200 - 299L</option>
                        <option value="300-399L">300 - 399L</option>
                        <option value="400-499L">400 - 499L</option>
                        <option value="500-599L">500 - 599L</option>
                        <option value="600-699L">600 - 699L</option>
                        <option value=">700L">More than 700L</option>
                    </select>
                </div>

                <br>
                <button onclick="applyChanges()">Apply</button>
                <button onclick="resetChanges()">Reset</button>

            </div>

        <div class="charts-section">
            <div class="chart-container">
                <div class="chart">
                    <h4>Emissions Change</h4>
                    <canvas id="emissionsChart"></canvas>
                </div>
                <div class="chart">
                    <h4>Cost Change</h4>
                    <canvas id="costChart"></canvas>
                </div>
            </div>
        </div>
    </div>

        <footer>
            Ready to take action?
            <p>Use our <a href="#">Emissions Calculator</a> to discover your personal carbon footprint and ways to reduce it.</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const carCommuteInput = document.getElementById('car-commute');
    const dishwasherInput = document.getElementById('dishwasher-hours');
    const washerInput = document.getElementById('washer-hours');
    const dryerInput = document.getElementById('dryer-hours');
    const acInput = document.getElementById('ac-hours');

    // Event listeners to update display values
    carCommuteInput.addEventListener('input', updateDisplayValues);
    dishwasherInput.addEventListener('input', updateDisplayValues);
    washerInput.addEventListener('input', updateDisplayValues);
    dryerInput.addEventListener('input', updateDisplayValues);
    acInput.addEventListener('input', updateDisplayValues);

    function updateDisplayValues() {
        document.getElementById('car-commute-output').innerText = `${carCommuteInput.value} km`;
        document.getElementById('dishwasher-output').innerText = `${dishwasherInput.value} hours`;
        document.getElementById('washer-output').innerText = `${washerInput.value} hours`;
        document.getElementById('dryer-output').innerText = `${dryerInput.value} hours`;
        document.getElementById('ac-output').innerText = `${acInput.value} hours`;
    }

    function applyChanges() {
        const data = {
            solarPanels: document.getElementById('solar-panels').checked,
            gasWaterHeater: document.getElementById('gas-water-heater').checked,
            carCommute: carCommuteInput.value,
            dishwasherHours: dishwasherInput.value,
            washerHours: washerInput.value,
            dryerHours: dryerInput.value,
            acHours: acInput.value
        };

        const emissions = calculateEmissions(data);
        const costs = calculateCostChange(data);

        // Save data to session storage
        sessionStorage.setItem('emissionsData', JSON.stringify(emissions));
        sessionStorage.setItem('costsData', JSON.stringify(costs));

        // Update charts
        updateCharts(emissions, costs);
    }

    function resetChanges() {
        sessionStorage.removeItem('emissionsData');
        sessionStorage.removeItem('costsData');
        updateDisplayValues();
        updateCharts([0, 0, 0, 0], [0, 0, 0, 0]);
    }

    function calculateEmissions(data) {
        return [
            data.carCommute * 0.2,
            data.dishwasherHours * 0.5,
            data.washerHours * 0.4,
            data.dryerHours * 0.6,
            data.acHours * 0.3
        ];
    }

    function calculateCostChange(data) {
        return [
            data.carCommute * 0.07,
            data.dishwasherHours * 0.1,
            data.washerHours * 0.08,
            data.dryerHours * 0.11,
            data.acHours * 0.09
        ];
    }

    function updateCharts(emissions, costs) {
        const ctxEmissions = document.getElementById('emissionsChart').getContext('2d');
        const ctxCosts = document.getElementById('costChart').getContext('2d');

        new Chart(ctxEmissions, {
            type: 'bar',
            data: {
                labels: ['Car', 'Dishwasher', 'Washer', 'Dryer', 'Air Conditioner'],
                datasets: [{
                    label: 'Emissions (kg CO2)',
                    data: emissions,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: { scales: { y: { beginAtZero: true } } }
        });

        new Chart(ctxCosts, {
            type: 'line',
            data: {
                labels: ['Car', 'Dishwasher', 'Washer', 'Dryer', 'Air Conditioner'],
                datasets: [{
                    label: 'Cost Change ($)',
                    data: costs,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: { scales: { y: { beginAtZero: true } } }
        });
    }

    // Load any existing data from session storage on page load
    window.onload = function() {
        const storedEmissions = JSON.parse(sessionStorage.getItem('emissionsData'));
        const storedCosts = JSON.parse(sessionStorage.getItem('costsData'));
        if (storedEmissions && storedCosts) {
            updateCharts(storedEmissions, storedCosts);
        } else {
            resetChanges();
        }
    };
</script>

</body>
</html>
